[toc]

## 10 | 如何保证集合是线程安全的？ConcurrentHashMap 如何实现高效地线程安全？

### 问题

-   **如何保证容器是线程安全的？ConcurrentHashMap 如何实现高效的线程安全？**

### 回答

1.  早期同步实现（不推荐）
    -   HashMap，实现方式 synchronized
    -   Vector，实现方式 synchronized
    -   Stack，实现方式 synchronized
    -   Collections.synchronizedMap，粗粒度
2.  利用并发包提供的线程安全容器类（推荐）
    -   并发容器，ConcurrentHashMap、CopyOnWriteArrayList
    -   线程安全队列，ArrayBlockingQueue、SynchronousQueue
    -   各有序容器的线程安全版本

### 分析

1.  理解基本的线程安全工具
2.  理解并发编程中 Map 存在的问题，清楚简单同步方式的不足
3.  理解并发包内，ConcurrentHashMap 如何来提高并发表现
4.  掌握 ConcurrentHashMap 演进

### 扩展

1.  为什么需要 ConcurrentHashMap ？
    -   HashMap 不是线程安全的。
    -   Collections 的同步包装器，使用 “this” 作为互斥的 mutex。没有真正意义上的改进。
2.  ConcurrentHashMap 分析
3.  

